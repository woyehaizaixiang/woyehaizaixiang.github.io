I"ş<<h2 id="docker-åŸºæœ¬æ¦‚å¿µ">Docker åŸºæœ¬æ¦‚å¿µ</h2>

<h3 id="é•œåƒ-image">é•œåƒ Image</h3>

<p>é•œåƒæ˜¯ä¸€äº›æ‰“åŒ…å¥½çš„å·²æœ‰çš„ç¯å¢ƒï¼Œå¯ä»¥è¢«ç”¨æ¥å¯åŠ¨å’Œåˆ›å»ºå®¹å™¨ï¼Œæœ¬èº«ä¸èƒ½è¢«ç›´æ¥ä¿®æ”¹ã€‚</p>

<h3 id="å®¹å™¨-container">å®¹å™¨ Container</h3>

<p>å®¹å™¨æ˜¯é•œåƒçš„å®ä¾‹åŒ–ï¼Œæ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œä½†æ˜¯éƒ½æ˜¯ä¸´æ—¶ä¿®æ”¹ã€‚</p>

<h3 id="å®¹å™¨å¯åŠ¨è¿‡ç¨‹">å®¹å™¨å¯åŠ¨è¿‡ç¨‹</h3>

<ol>
  <li>æ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„é•œåƒï¼Œä¸å­˜åœ¨å°±ä»å…¬æœ‰ä»“åº“ä¸‹è½½</li>
  <li>åˆ©ç”¨é•œåƒåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨</li>
  <li>åˆ†é…ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨åªè¯»çš„é•œåƒå±‚å¤–é¢æŒ‚è½½ä¸€å±‚å¯è¯»å†™å±‚</li>
  <li>ä»å®¿ä¸»ä¸»æœºé…ç½®çš„ç½‘æ¡¥æ¥å£ä¸­æ¡¥æ¥ä¸€ä¸ªè™šæ‹Ÿæ¥å£åˆ°å®¹å™¨ä¸­å»</li>
  <li>ä»åœ°å€æ± é…ç½®ä¸€ä¸ª ip åœ°å€ç»™å®¹å™¨</li>
  <li>æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„åº”ç”¨ç¨‹åº</li>
  <li>æ‰§è¡Œå®Œæ¯•åå®¹å™¨è¢«ç»ˆæ­¢</li>
</ol>

<h2 id="docker-å¸¸ç”¨å‘½ä»¤">Docker å¸¸ç”¨å‘½ä»¤</h2>

<h3 id="image-æ“ä½œ">Image æ“ä½œ</h3>

<h4 id="åŸºæœ¬æ“ä½œ">åŸºæœ¬æ“ä½œ</h4>

<ul>
  <li>æ˜¾ç¤ºæœ¬åœ°æ‰€æœ‰é•œåƒ</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker images
</code></pre></div></div>

<ul>
  <li>æœç´¢ä¸€ä¸ªimage</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker search image_name
</code></pre></div></div>

<ul>
  <li>ä¸‹è½½image</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull image_name
</code></pre></div></div>

<ul>
  <li>åˆ é™¤é•œåƒ</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker rmi image_name
</code></pre></div></div>

<ul>
  <li>æ˜¾ç¤ºé•œåƒå†å²</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker history image_name
</code></pre></div></div>

<h4 id="åˆ¶ä½œé•œåƒ">åˆ¶ä½œé•œåƒ</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build -t image_name DockerfilePath
</code></pre></div></div>

<p>è¿™é‡ŒDockerfilePathæ˜¯Contextä¸Šä¸‹æ–‡ç›®å½•ï¼Œåœ¨åˆ›å»ºçš„æ—¶å€™ä¼šå…¨éƒ¨ä¸Šä¼ åˆ°Docker Serverç«¯ï¼Œæ‰€ä»¥è¿™ä¸ªç›®å½•ä¸è¦å¤ªå¤§</p>

<h4 id="è¿ç§»é•œåƒ">è¿ç§»é•œåƒ</h4>

<ul>
  <li>ä¿å­˜é•œåƒåˆ°æ–‡ä»¶</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker save image_name -o file.tar
</code></pre></div></div>

<ul>
  <li>åŠ è½½ä¸€ä¸ªtaråŒ…çš„é•œåƒ</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker load -i file.tar
</code></pre></div></div>

<h3 id="container-æ“ä½œ">Container æ“ä½œ</h3>

<h4 id="æ˜¾ç¤ºç›¸å…³">æ˜¾ç¤ºç›¸å…³</h4>

<ul>
  <li>æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker ps

# ä¸€è¡Œæ˜¾ç¤ºå…¨éƒ¨å®¹å™¨
docker ps | less -S

# æœ€è¿‘ä¸€æ¬¡å¯åŠ¨
docker ps -l

# åˆ—å‡ºæ‰€æœ‰å®¹å™¨
docker ps -a
</code></pre></div></div>

<ul>
  <li>æ˜¾ç¤ºä¸€ä¸ªè¿è¡Œçš„å®¹å™¨é‡Œé¢çš„è¿›ç¨‹ä¿¡æ¯</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker top cid
</code></pre></div></div>

<ul>
  <li>æ˜¾ç¤ºå®¹å™¨è¯¦ç»†ä¿¡æ¯</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker inspect cid
</code></pre></div></div>

<ul>
  <li>æŸ¥çœ‹å®¹å™¨æ—¥å¿—</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker logs cid

# å®æ—¶æŸ¥çœ‹æ—¥å¿—è¾“å‡º
docker logs -f cid
</code></pre></div></div>

<ul>
  <li>æŸ¥çœ‹å®¹å™¨æ›´æ”¹</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker diff cid
</code></pre></div></div>

<ul>
  <li>æŸ¥çœ‹å®¹å™¨rootç”¨æˆ·å¯†ç </li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker logs cid 2&gt;&amp;1 | grep '^User: ' | tail -n1
</code></pre></div></div>

<h4 id="è¿è¡Œç›¸å…³">è¿è¡Œç›¸å…³</h4>

<ul>
  <li>å¯åŠ¨å®¹å™¨å¹¶æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼ˆäº¤äº’ï¼‰</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># -t ç»ˆç«¯
# -i äº¤äº’æ“ä½œ
docker run -it ubuntu /bin/bash

# è¿è¡Œä¸€ä¸ªhello wordç„¶åå°±è‡ªåŠ¨å…³é—­
docker run image_name echo "hello word"

# å‘½åå¹¶å¯åŠ¨å®¹å™¨
docker run --name test ubuntu

# åå°è¿è¡Œä¸€ä¸ªå®¹å™¨
docker run -d -it ubuntu

# æ˜ å°„ç«¯å£
docker run -p 8080:8080 ubuntu

# æŒ‚è½½volumn
docker run -v ./test:/var/www

# container å†… root æ‹¥æœ‰çœŸæ­£rootæƒé™
docker run --privileged=false

# å¯åŠ¨å®Œé•œåƒåè‡ªåŠ¨åˆ é™¤
docker run -it --rm ubuntu bash
</code></pre></div></div>

<ul>
  <li>é™„ç€åˆ°æ­£åœ¨è¿è¡Œçš„å®¹å™¨, é™„ç€å®Œä»¥åé€€å‡ºä¼šå¯¼è‡´å®¹å™¨ä¹Ÿç»ˆæ­¢</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker attach cid
</code></pre></div></div>

<ul>
  <li>è¿›å…¥æ­£åœ¨è¿è¡Œçš„ container å¹¶ä¸”æ‰§è¡Œ</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker exec -it 839a6cfc9496 /bin/bash
</code></pre></div></div>

<ul>
  <li>åœ¨å®¹å™¨ä¸­è¿è¡Œä¸€æ®µç¨‹åº</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run ubuntu apt-get update
</code></pre></div></div>

<ul>
  <li>æ‹·è´æ–‡ä»¶å‡ºæ¥</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker cp cid:/container_path to_path  
</code></pre></div></div>

<h4 id="ä¿®æ”¹å®¹å™¨">ä¿®æ”¹å®¹å™¨</h4>

<p>imageç›¸å½“äºç±»ï¼Œcontainerç›¸å½“äºå®ä¾‹ï¼Œä¸è¿‡å¯ä»¥åŠ¨æ€ç»™å®ä¾‹å®‰è£…æ–°è½¯ä»¶ï¼Œç„¶åæŠŠè¿™ä¸ªcontainerç”¨commitå‘½ä»¤å›ºåŒ–æˆä¸€ä¸ªimage</p>

<ul>
  <li>æäº¤ä¸€ä¸ªcommit</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker commit cid new_image_name
</code></pre></div></div>

<ul>
  <li>åˆ é™¤å®¹å™¨</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker rm cid

# å¼ºåˆ¶åˆ é™¤
docker rm -f cid

# åˆ é™¤æ‰€æœ‰å®¹å™¨
docker rm `docker ps -a -q`
</code></pre></div></div>

<ul>
  <li>çŠ¶æ€ä¿®æ”¹</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker start/stop/kill/restart cid
</code></pre></div></div>

<ul>
  <li>æ›´æ”¹åå­—</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker rename old new
</code></pre></div></div>

<h4 id="é“¾æ¥å®¹å™¨">é“¾æ¥å®¹å™¨</h4>

<p>sonarå®¹å™¨è¿æ¥åˆ°mysqlå®¹å™¨ï¼Œå¹¶å°†mysqlå®¹å™¨é‡å‘½åä¸ºdbã€‚è¿™æ ·ï¼Œsonarå®¹å™¨å°±å¯ä»¥ä½¿ç”¨dbçš„ç›¸å…³çš„ç¯å¢ƒå˜é‡äº†ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -it --name sonar -d -link mysql:db tpires/sonar-server
</code></pre></div></div>

<h3 id="ä»“åº“æ“ä½œ">ä»“åº“æ“ä½œ</h3>

<ul>
  <li>ç™»å½•åˆ°dockerä»“åº“</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker login
</code></pre></div></div>

<ul>
  <li>ä¸Šä¼ é•œåƒ</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker push new_image_name
</code></pre></div></div>

<h2 id="dockerfile-å¸¸ç”¨å‘½ä»¤">Dockerfile å¸¸ç”¨å‘½ä»¤</h2>

<p>æœ‰äº† Dockerfile å¯ä»¥è‡ªå®šä¹‰ä¸€äº›è‡ªå·±éœ€è¦çš„é•œåƒï¼Œåœ¨ç†Ÿæ‚‰äº† Docker åŸºæœ¬æ“ä½œï¼Œç„¶åä½¿ç”¨è¿‡ä¸€äº›åˆ«äººæä¾›å¥½çš„é•œåƒä»¥åï¼Œéš¾å…éœ€è¦è‡ªå·±ä¿®æ”¹ä¸€éƒ¨åˆ†ã€‚</p>

<h3 id="from">FROM</h3>

<p>æŒ‡å®šåŸºç¡€é•œåƒã€‚ä¾‹å¦‚ï¼š</p>

<ul>
  <li>ubuntu</li>
  <li>nginx</li>
  <li>redis</li>
  <li>â€¦</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FROM nginx
</code></pre></div></div>

<h3 id="run">RUN</h3>

<p>æ‰§è¡Œä¸€äº›å‘½ä»¤</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RUN echo '&lt;h1&gt;Hello, Docker!&lt;/h1&gt;' &gt; /usr/share/nginx/html/index.html
</code></pre></div></div>

<p>æ¯ä¸ªRUNå‘½ä»¤éƒ½ä¼šåœ¨å®¹å™¨ä¸­å»ºç«‹ä¸€å±‚ï¼Œæ‰€ä»¥å°½é‡åˆå¹¶å¤šä¸ªå‘½ä»¤ã€‚ä¾‹å¦‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RUN buildDeps='gcc libc6-dev make' \
    &amp;&amp; apt-get update \
    &amp;&amp; apt-get install -y $buildDeps \
    ...
</code></pre></div></div>

<h3 id="copy">COPY</h3>

<p>å¤åˆ¶æ–‡ä»¶åˆ°æŒ‡å®šç›®å½• source -&gt; target</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>COPY ./package.json /usr/src/app
</code></pre></div></div>

<h3 id="cmd">CMD</h3>

<p>å®¹å™¨çš„å¯åŠ¨å‘½ä»¤</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CMD ["nginx", "-g", "daemon off;"]
</code></pre></div></div>

<p>è¿™ä¸ªå‘½ä»¤å¯ä»¥åœ¨å¯åŠ¨æ—¶è¢«è¦†ç›–ã€‚å¦å¤–å®ƒä¹Ÿå¯ä»¥ä¸º ENTRYPOINT æä¾›å‚æ•°ã€‚</p>

<blockquote>
  <p>CMD ç†è®ºä¸Šåªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœæƒ³è¦æ‰§è¡Œä¸¤ä¸ªå‘½ä»¤ï¼Œéœ€è¦ä½¿ç”¨ <code class="highlighter-rouge">&amp;</code> æ¥è¿æ¥ä¸¤ä¸ªå‘½ä»¤ï¼Œæˆ–è€…ä½¿ç”¨ä¸€ä¸ªbashæ–‡ä»¶ã€‚æ›´ä¸ºé«˜çº§ä¸€ç‚¹çš„æ–¹æ³•æ˜¯ç”¨supervisoræ¥ç®¡ç†</p>
</blockquote>

<h3 id="entrypoint">ENTRYPOINT</h3>

<p>ENTRYPOINT å’Œ CMD æœ‰ä¸€éƒ¨åˆ†é‡å¤å·¥ä½œï¼Œä½†æ˜¯ ENTRYPOINT å¯ä»¥è®©å®¹å™¨åƒè½¯ä»¶ä¸€æ ·æ‰§è¡Œã€‚ä¾‹å¦‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ENTRYPOINT /bin/echo
</code></pre></div></div>

<p>åœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¹‹åå¢åŠ çš„å†…å®¹éƒ½å±äºè¿™ä¸ªå‘½ä»¤çš„å‚æ•°ã€‚</p>

<h3 id="env">ENV</h3>

<p>è®¾ç½®ç¯å¢ƒå˜é‡ã€‚</p>

<p><code class="highlighter-rouge">ENV key value</code></p>

<h3 id="arg">ARG</h3>

<p>æ„å»ºå‚æ•°ï¼Œåœ¨å®¹å™¨å¯åŠ¨åä¸ä¼šå­˜åœ¨ã€‚</p>

<h3 id="volume">VOLUME</h3>

<p>å®šä¹‰åŒ¿åå·ï¼Œä»¥å…ç”¨æˆ·å¿˜äº†æŒ‚è½½volumnï¼Œå¯¼è‡´å¤§é‡å†™å…¥ã€‚è¿™ä¸ª Volume åœ¨å®¹å™¨å¯åŠ¨å‰å¯ä»¥æ·»åŠ å†…å®¹ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯å®é™…æ“ä½œç”¨æˆ·æŒ‚è½½çš„å†…å®¹ã€‚åœ¨ç”¨æˆ·æŒ‚è½½å®Œ volume åï¼ŒåŸæ¥å†™åœ¨è¿™é‡Œçš„å†…å®¹ä¼šè¢«å¤åˆ¶åˆ°ç”¨æˆ·æŒ‚è½½çš„ç›®å½•ã€‚</p>

<blockquote>
  <p>æ³¨æ„ï¼šåœ¨ VOLUME å‘½ä»¤ä¹‹åå¯¹è¿™ä¸ªç›®å½•çš„æ‰€æœ‰æ“ä½œï¼Œå°†è¢«å¿½ç•¥ã€‚</p>
</blockquote>

<h3 id="expose">EXPOSE</h3>

<p>ç”³æ˜ç«¯å£ï¼Œå¯ä»¥ç”¨æ¥é»˜è®¤æ˜ å°„ç«¯å£ï¼Œä»¥åŠå®¹å™¨é—´äº’é€šã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>EXPOSE 22 80
</code></pre></div></div>

<h3 id="workdir">WORKDIR</h3>

<p>æŒ‡å®šå·¥ä½œç›®å½•ã€‚ä¸ä»…æ˜¯å½“å‰ docker ä¸­çš„ç›®å½•ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è¿è¡Œå®¹å™¨æ—¶åˆšåˆšç™»å½•ä»¥åçš„ç›®å½•ã€‚</p>

<h3 id="user">USER</h3>

<p>æŒ‡å®šå½“å‰ç”¨æˆ·ã€‚</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RUN groupadd -r redis &amp;&amp; useradd -r -g redis redis
USER redis
RUN [ "redis-server" ]
</code></pre></div></div>

<h3 id="healthcheck">HEALTHCHECK</h3>

<p>å¥åº·æ£€æŸ¥</p>

<h3 id="onbuild">ONBUILD</h3>

<p>å½“æ­¤å®¹å™¨ä½œä¸ºåˆ«çš„å®¹å™¨çš„åŸºç¡€å®¹å™¨æ—¶æ“ä½œå†…å®¹</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FROM node:slim
RUN "mkdir /app"
WORKDIR /app
ONBUILD COPY ./package.json /app
ONBUILD RUN [ "npm", "install" ]
ONBUILD COPY . /app/
CMD [ "npm", "start" ]
</code></pre></div></div>

<h2 id="docker-compose-å¸¸ç”¨æŒ‡ä»¤">Docker-compose å¸¸ç”¨æŒ‡ä»¤</h2>

<h3 id="depends_on">depends_on</h3>

<p>è¿™ä¸ªä¸ä»…å¯ä»¥ä¿è¯buildçš„å…ˆåé¡ºåºï¼Œè¿˜å¯ä»¥çœå»linksçš„è®¾ç½®</p>

<h3 id="links">links</h3>

<p>å’Œdocker runå‘½ä»¤ä¸€è‡´ï¼Œä¸»è¦åŸå› æ˜¯åœ¨æ¯æ¬¡æ–°å¼€å¯containerçš„æ—¶å€™ï¼Œportå¯èƒ½ä¼šå˜ï¼Œæ‰€ä»¥æœ‰äº†è¿™ä¸ªè®¾ç½®å¯ä»¥ä¿è¯æ¯æ¬¡éƒ½å¯ä»¥ç»‘å®šåˆ°æ­£ç¡®çš„å€¼ã€‚</p>

<h2 id="å®ä¾‹æ“ä½œ">å®ä¾‹æ“ä½œ</h2>

<h3 id="åˆ›å»ºä¸€ä¸ªlampçš„é¡¹ç›®">åˆ›å»ºä¸€ä¸ªLAMPçš„é¡¹ç›®</h3>

<p>é¦–å…ˆæ˜¯ç›®å½•ç»“æ„</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”œâ”€â”€ README.md
â”œâ”€â”€ apache
â”‚Â Â  â””â”€â”€ virtualhost.conf
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ mysql
â”‚Â Â  â”œâ”€â”€ Dockerfile
â”‚Â Â  â””â”€â”€ my.cnf
â”œâ”€â”€ php
â”‚Â Â  â”œâ”€â”€ Dockerfile
â”‚Â Â  â””â”€â”€ php.ini
â””â”€â”€ src
    â””â”€â”€ index.php
</code></pre></div></div>

<p>åˆ›å»º docker-compose.yml</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">2'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">mysql</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mysql</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">3306:3306"</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">MYSQL_ROOT_PASSWORD</span><span class="pi">:</span> <span class="s">password</span>
      <span class="na">MYSQL_DATABASE</span><span class="pi">:</span> <span class="s">phpdata</span>
      <span class="na">MYSQL_USER</span><span class="pi">:</span> <span class="s">user</span>
      <span class="na">MYSQL_PASSWORD</span><span class="pi">:</span> <span class="s">password</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">dbdata:/var/lib/mysql</span>
  <span class="na">php</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">./php</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s1">'</span><span class="s">8080:80'</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./src:/var/www/html</span>
      <span class="pi">-</span> <span class="s">./apache:/etc/apache2/sites-enabled/</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">mysql</span>
  <span class="na">phpmyadmin</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">phpmyadmin/phpmyadmin</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s1">'</span><span class="s">8081:80'</span>
    <span class="na">links</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">mysql:db</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">PMA_USER</span><span class="pi">:</span> <span class="s">root</span>
      <span class="na">PMA_PASSWORD</span><span class="pi">:</span> <span class="s">password</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">adminsessions:/sessions</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">mysql</span>
      <span class="pi">-</span> <span class="s">php</span>
<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">dbdata</span><span class="pi">:</span>
  <span class="na">adminsessions</span><span class="pi">:</span>
</code></pre></div></div>

<h2 id="é—®é¢˜è®°å½•">é—®é¢˜è®°å½•</h2>

<h3 id="mysql-æŒ‚è½½-volume-åå¯åŠ¨æ—¶æ˜¾ç¤ºæ— æƒé™">Mysql æŒ‚è½½ volume åå¯åŠ¨æ—¶æ˜¾ç¤ºæ— æƒé™</h3>

<p>è®¾ç½®mysqlçš„å¯åŠ¨æ¨¡å¼ <code class="highlighter-rouge">privileged:true</code></p>

<p>å¦å¤–è¿™ä¸ªé—®é¢˜ä¸€èˆ¬ä¸ä¼šå‘ç”Ÿï¼Œæˆ‘ä¹‹å‰é‡åˆ°ä¸»è¦åŸå› æ˜¯æˆ‘æŠŠå¤šä¸ª volume éƒ½æ˜ å°„åˆ°äº†ä¸€ä¸ªä¸Šé¢ï¼Œå¯¼è‡´ç›®å½•å†…éƒ¨è¯»å†™å‘ç”Ÿå†²çªã€‚</p>

:ET